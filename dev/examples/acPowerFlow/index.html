<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>AC Power Flow · JuliaGrid</title><meta name="title" content="AC Power Flow · JuliaGrid"/><meta property="og:title" content="AC Power Flow · JuliaGrid"/><meta property="twitter:title" content="AC Power Flow · JuliaGrid"/><meta name="description" content="Documentation for JuliaGrid."/><meta property="og:description" content="Documentation for JuliaGrid."/><meta property="twitter:description" content="Documentation for JuliaGrid."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/style.css" rel="stylesheet" type="text/css"/><link href="../../assets/citations.css" rel="stylesheet" type="text/css"/><link href="../../assets/subfigure.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="JuliaGrid logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">JuliaGrid</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/powerSystemModel/">Power System Model</a></li><li><a class="tocitem" href="../../manual/acPowerFlow/">AC Power Flow</a></li><li><a class="tocitem" href="../../manual/dcPowerFlow/">DC Power Flow</a></li><li><a class="tocitem" href="../../manual/acOptimalPowerFlow/">AC Optimal Power Flow</a></li><li><a class="tocitem" href="../../manual/dcOptimalPowerFlow/">DC Optimal Power Flow</a></li><li><a class="tocitem" href="../../manual/measurementModel/">Measurement Model</a></li><li><a class="tocitem" href="../../manual/observabilityAnalysis/">Observability Analysis</a></li><li><a class="tocitem" href="../../manual/acStateEstimation/">AC State Estimation</a></li><li><a class="tocitem" href="../../manual/pmuStateEstimation/">PMU State Estimation</a></li><li><a class="tocitem" href="../../manual/dcStateEstimation/">DC State Estimation</a></li><li><a class="tocitem" href="../../manual/badDataAnalysis/">Bad Data Analysis</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/powerSystemModel/">Power System Model</a></li><li><a class="tocitem" href="../../tutorials/acPowerFlow/">AC Power Flow</a></li><li><a class="tocitem" href="../../tutorials/dcPowerFlow/">DC Power Flow</a></li><li><a class="tocitem" href="../../tutorials/acOptimalPowerFlow/">AC Optimal Power Flow</a></li><li><a class="tocitem" href="../../tutorials/dcOptimalPowerFlow/">DC Optimal Power Flow</a></li><li><a class="tocitem" href="../../tutorials/measurementModel/">Measurement Model</a></li><li><a class="tocitem" href="../../tutorials/observabilityAnalysis/">Observability Analysis</a></li><li><a class="tocitem" href="../../tutorials/acStateEstimation/">AC State Estimation</a></li><li><a class="tocitem" href="../../tutorials/pmuStateEstimation/">PMU State Estimation</a></li><li><a class="tocitem" href="../../tutorials/dcStateEstimation/">DC State Estimation</a></li><li><a class="tocitem" href="../../tutorials/badDataAnalysis/">Bad Data Analysis</a></li><li><a class="tocitem" href="../../tutorials/perunit/">Per-Unit System</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../powerSystemDatasets/">Power System Datasets</a></li><li class="is-active"><a class="tocitem" href>AC Power Flow</a><ul class="internal"><li><a class="tocitem" href="#Base-Case-Analysis"><span>Base Case Analysis</span></a></li><li><a class="tocitem" href="#Modifying-Supplies-and-Demands"><span>Modifying Supplies and Demands</span></a></li><li><a class="tocitem" href="#Modifying-Network-Topology"><span>Modifying Network Topology</span></a></li></ul></li><li><a class="tocitem" href="../dcPowerFlow/">DC Power Flow</a></li><li><a class="tocitem" href="../acOptimalPowerFlow/">AC Optimal Power Flow</a></li><li><a class="tocitem" href="../dcOptimalPowerFlow/">DC Optimal Power Flow</a></li><li><a class="tocitem" href="../observabilityAnalysis/">Observability Analysis</a></li><li><a class="tocitem" href="../acStateEstimation/">AC State Estimation</a></li><li><a class="tocitem" href="../pmuStateEstimation/">PMU State Estimation</a></li><li><a class="tocitem" href="../dcStateEstimation/">DC State Estimation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/powerSystemModel/">Power System Model</a></li><li><a class="tocitem" href="../../api/powerFlow/">Power Flow</a></li><li><a class="tocitem" href="../../api/optimalPowerFlow/">Optimal Power Flow</a></li><li><a class="tocitem" href="../../api/measurementModel/">Measurement Model</a></li><li><a class="tocitem" href="../../api/stateEstimation/">State Estimation</a></li><li><a class="tocitem" href="../../api/analysis/">Powers and Currents</a></li><li><a class="tocitem" href="../../api/setupPrint/">Setup and Print</a></li><li><a class="tocitem" href="../../api/publicTypes/">Public Types</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Background</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../background/installation/">Installation Guide</a></li><li><a class="tocitem" href="../../background/bibliography/">Bibliography</a></li><li><a class="tocitem" href="../../background/releasenotes/">Release Notes</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>AC Power Flow</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>AC Power Flow</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/mcosovic/JuliaGrid.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/mcosovic/JuliaGrid.jl/blob/master/docs/src/examples/acPowerFlow.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="ACPowerFlowExamples"><a class="docs-heading-anchor" href="#ACPowerFlowExamples">AC Power Flow</a><a id="ACPowerFlowExamples-1"></a><a class="docs-heading-anchor-permalink" href="#ACPowerFlowExamples" title="Permalink"></a></h1><p>In this example, we perform several AC power flow analyses using the power system shown in Figure 1. These analyses simulate quasi-steady-state conditions where the system undergoes parameter and topology changes, demonstrating JuliaGrid&#39;s efficiency in handling such scenarios.</p><div style="text-align: center;">
    <img src="../../assets/examples/acPowerFlow/4bus.svg" width="400" class="my-svg"/>
    <p>Figure 1: The 4-bus power system.</p>
</div>
&nbsp;<div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>Users can download a Julia script containing the scenarios from this section using the following <a href="https://github.com/mcosovic/JuliaGrid.jl/raw/refs/heads/master/docs/src/examples/analyses/acPowerFlow.jl">link</a>.</p></div></div><p>We begin by defining the units for active and reactive powers, as well as voltage magnitudes and angles, which will be used throughout this example:</p><pre><code class="language-julia hljs">@power(MW, MVAr)
@voltage(pu, deg)</code></pre><p>Next, we define the bus parameters for AC power flow analysis This includes specifying the <code>type</code> of each bus, the connected <code>active</code> and <code>reactive</code> power loads, and shunt capacitor banks with <code>conductance</code> and <code>susceptance</code> values. The bus voltage <code>magnitude</code> and <code>angle</code> serve as initial values for the iterative power flow algorithm. Note that for the slack bus (<code>type = 3</code>), the angle is fixed to the specified value. With these definitions, we can start to build the power system model:</p><pre><code class="language-julia hljs">system = powerSystem()

@bus(magnitude = 1.1, angle = -5.7)
addBus!(system; label = &quot;Bus 1&quot;, type = 3, angle = 0.0)
addBus!(system; label = &quot;Bus 2&quot;, type = 2, active = 20.2, reactive = 10.5)
addBus!(system; label = &quot;Bus 3&quot;, type = 1, conductance = 0.1, susceptance = 8.2)
addBus!(system; label = &quot;Bus 4&quot;, type = 1, active = 50.8, reactive = 23.1)</code></pre><p>Next, we refine the transmission line parameters by adding <code>resistance</code>, <code>reactance</code>, and <code>susceptance</code> values. Additionally, for transformers, we specify the off-nominal turns ratio using the <code>turnsRatio</code> keyword:</p><pre><code class="language-julia hljs">@branch(label = &quot;Branch ?&quot;, reactance = 0.22)
addBranch!(system; from = &quot;Bus 1&quot;, to = &quot;Bus 3&quot;, resistance = 0.02, susceptance = 0.05)
addBranch!(system; from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, resistance = 0.05, susceptance = 0.04)
addBranch!(system; from = &quot;Bus 2&quot;, to = &quot;Bus 3&quot;, resistance = 0.04, susceptance = 0.04)
addBranch!(system; from = &quot;Bus 3&quot;, to = &quot;Bus 4&quot;, turnsRatio = 0.98)</code></pre><p>Finally, we define the <code>active</code> and <code>reactive</code> power outputs of the generators and set the voltage <code>magnitude</code> setpoints. These setpoints fix the voltage magnitudes for the slack bus (<code>type = 3</code>) and generator buses (<code>type = 2</code>):</p><pre><code class="language-julia hljs">@generator(label = &quot;Generator ?&quot;)
addGenerator!(system; bus = &quot;Bus 1&quot;, active = 60.1, reactive = 40.2,  magnitude = 0.98)
addGenerator!(system; bus = &quot;Bus 2&quot;, active = 18.2, magnitude = 1.01)</code></pre><p>After defining the power system data, we generate an AC model that includes essential vectors and matrices for analysis, such as the nodal admittance matrix. This model is automatically updated with data changes and can be shared across different analyses:</p><pre><code class="language-julia hljs">acModel!(system)</code></pre><hr/><h5 id="Display-Data-Settings"><a class="docs-heading-anchor" href="#Display-Data-Settings">Display Data Settings</a><a id="Display-Data-Settings-1"></a><a class="docs-heading-anchor-permalink" href="#Display-Data-Settings" title="Permalink"></a></h5><p>Before running simulations, we set the <code>verbose</code> keyword from its default silent mode (<code>0</code>) to basic output (<code>1</code>):</p><pre><code class="language-julia hljs">@config(verbose = 1)</code></pre><p>However, if we need more detailed solver output, the <code>verbose</code> setting can be adjusted within the function responsible for performing the power flow. Next, we configure the data display settings, including the selection of displayed data elements and the numeric format for relevant power flow values.</p><p>For bus-related data, we set:</p><pre><code class="language-julia hljs">show1 = Dict(&quot;Power Injection&quot; =&gt; false)
fmt1 = Dict(&quot;Power Generation&quot; =&gt; &quot;%.2f&quot;, &quot;Power Demand&quot; =&gt; &quot;%.2f&quot;, &quot;Shunt Power&quot; =&gt; &quot;%.2f&quot;)</code></pre><p>Similarly, for branch-related data, we choose:</p><pre><code class="language-julia hljs">show2 = Dict(&quot;Shunt Power&quot; =&gt; false, &quot;Status&quot; =&gt; false)
fmt2 = Dict(&quot;From-Bus Power&quot; =&gt; &quot;%.2f&quot;, &quot;To-Bus Power&quot; =&gt; &quot;%.2f&quot;, &quot;Series Power&quot; =&gt; &quot;%.2f&quot;)</code></pre><hr/><h2 id="Base-Case-Analysis"><a class="docs-heading-anchor" href="#Base-Case-Analysis">Base Case Analysis</a><a id="Base-Case-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Base-Case-Analysis" title="Permalink"></a></h2><p>At the start, we use the fast Newton-Raphson XB method to solve the AC power flow:</p><pre><code class="language-julia hljs">fnr = fastNewtonRaphsonXB(system)</code></pre><p>Then, we use the AC power flow wrapper to iteratively compute bus voltages as well as active and reactive powers:</p><pre><code class="language-julia hljs">powerFlow!(fnr; power = true, verbose = 2)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Number of entries in the Jacobians: 11
  Active Power:                      7
  Reactive Power:                    4
Number of state variables:           5

---------------------------------------------------------------
Iteration   Maximum Active Mismatch   Maximum Reactive Mismatch
---------------------------------------------------------------
        0            4.61818182e-01              9.63142262e-01
        1            1.77748104e-01              3.36304103e-02
        2            1.91631619e-02              3.40094647e-03
        3            2.44565654e-03              4.00326340e-04
        4            3.06356277e-04              4.86320320e-05
        5            3.76577214e-05              5.92151978e-06
        6            4.59272704e-06              7.20154616e-07
        7            5.58645482e-07              8.75181686e-08
        8            6.78952866e-08              1.06328286e-08
        9            8.24944624e-09              1.29169581e-09

                       Minimum Value   Maximum Value
Magnitude Increment:      5.6585e-10      5.7490e-09
Angle Increment:          1.5264e-09      4.9430e-09

EXIT: The solution was found using the fast Newton-Raphson method in 9 iterations.</code></pre><p>Once the AC power flow is solved, we can analyze the results related to the buses. For instance:</p><pre><code class="language-julia hljs">printBusData(fnr; show = show1, fmt = fmt1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">|------------------------------------------------------------------------------------------|
| Bus Data                                                                                 |
|------------------------------------------------------------------------------------------|
| Label |       Voltage        | Power Generation  |   Power Demand    |    Shunt Power    |
|       |                      |                   |                   |                   |
|   Bus | Magnitude |    Angle | Active | Reactive | Active | Reactive | Active | Reactive |
|       |      [pu] |    [deg] |   [MW] |   [MVAr] |   [MW] |   [MVAr] |   [MW] |   [MVAr] |
|-------|-----------|----------|--------|----------|--------|----------|--------|----------|
| Bus 1 |    0.9800 |   0.0000 |  53.73 |   -16.12 |   0.00 |     0.00 |   0.00 |    -0.00 |
| Bus 2 |    1.0100 |  -2.8924 |  18.20 |    43.22 |  20.20 |    10.50 |   0.00 |    -0.00 |
| Bus 3 |    0.9641 |  -4.5972 |   0.00 |     0.00 |   0.00 |     0.00 |   0.09 |    -7.62 |
| Bus 4 |    0.9211 | -11.6813 |   0.00 |     0.00 |  50.80 |    23.10 |   0.00 |    -0.00 |
|------------------------------------------------------------------------------------------|</code></pre><p>Similarly, the results for branches are:</p><pre><code class="language-julia hljs">printBranchData(fnr; show = show2, fmt = fmt2)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">|------------------------------------------------------------------------------------------|
| Branch Data                                                                              |
|------------------------------------------------------------------------------------------|
|            Label             |  From-Bus Power   |   To-Bus Power    |   Series Power    |
|                              |                   |                   |                   |
|   Branch | From-Bus | To-Bus | Active | Reactive | Active | Reactive | Active | Reactive |
|          |          |        |   [MW] |   [MVAr] |   [MW] |   [MVAr] |   [MW] |   [MVAr] |
|----------|----------|--------|--------|----------|--------|----------|--------|----------|
| Branch 1 | Bus 1    | Bus 3  |  34.90 |     2.87 | -34.64 |    -4.74 |   0.26 |     2.85 |
| Branch 2 | Bus 1    | Bus 2  |  18.82 |   -18.99 | -18.49 |    16.51 |   0.34 |     1.48 |
| Branch 3 | Bus 2    | Bus 3  |  16.49 |    16.21 | -16.25 |   -18.81 |   0.24 |     1.30 |
| Branch 4 | Bus 3    | Bus 4  |  50.80 |    31.17 | -50.80 |   -23.10 |   0.00 |     8.07 |
|------------------------------------------------------------------------------------------|</code></pre><p>Thus, using bus and branch data, we obtained the active and reactive power flows, as illustrated in Figure 2.</p><div class="image-container">
    <div class="image-item">
        <img src="../../assets/examples/acPowerFlow/4bus_base_active.svg" class="my-svg"/>
        <p>(a) Active powers.</p>
    </div>
    <div class="image-item">
        <img src="../../assets/examples/acPowerFlow/4bus_base_reactive.svg" class="my-svg"/>
        <p>(b) Reactive powers.</p>
    </div>
    <p style="text-align: center; margin-top: -5px;">
    Figure 2: Power flows in the 4-bus power system for the base case scenario.
    </p>
</div>
&nbsp;<p>Additionally, the branch data shows the series power losses, which result from the series resistance and reactance of each branch. Note that the active power at the from-bus and to-bus ends of a branch differs by the active power loss. However, this does not apply to reactive power, as branch susceptances provide partial compensation.</p><hr/><h2 id="Modifying-Supplies-and-Demands"><a class="docs-heading-anchor" href="#Modifying-Supplies-and-Demands">Modifying Supplies and Demands</a><a id="Modifying-Supplies-and-Demands-1"></a><a class="docs-heading-anchor-permalink" href="#Modifying-Supplies-and-Demands" title="Permalink"></a></h2><p>We will modify the active and reactive power outputs of the generators, as well as the active and reactive powers demanded by consumers. Instead of creating a new power system model or just updating the existing one, we will update both the power system model and the fast Newton-Raphson model simultaneously:</p><pre><code class="language-julia hljs">updateBus!(fnr; label = &quot;Bus 2&quot;, active = 25.5, reactive = 15.0)
updateBus!(fnr; label = &quot;Bus 4&quot;, active = 42.0, reactive = 20.0)

updateGenerator!(fnr; label = &quot;Generator 1&quot;, active = 58.0, reactive = 20.0)
updateGenerator!(fnr; label = &quot;Generator 2&quot;, active = 23.1, reactive = 20.0)</code></pre><p>Next, we run the AC power flow again to compute the new state of the power system, without having to recreate the fast Newton-Raphson model. Additionally, this step will start the fast Newton-Raphson method with a warm start, as the initial voltage magnitudes and angles will correspond to the solution from the base case analysis:</p><pre><code class="language-julia hljs">powerFlow!(fnr; power = true)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">EXIT: The solution was found using the fast Newton-Raphson method in 8 iterations.</code></pre><p>Since no power system changes were introduced that affect the Jacobian matrices, JuliaGrid reuses the Jacobian matrix factorizations from the base case analysis, significantly reducing computational complexity.</p><p>Finally, we can display the relevant data:</p><pre><code class="language-julia hljs">printBranchData(fnr; show = show2, fmt = fmt2)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">|------------------------------------------------------------------------------------------|
| Branch Data                                                                              |
|------------------------------------------------------------------------------------------|
|            Label             |  From-Bus Power   |   To-Bus Power    |   Series Power    |
|                              |                   |                   |                   |
|   Branch | From-Bus | To-Bus | Active | Reactive | Active | Reactive | Active | Reactive |
|          |          |        |   [MW] |   [MVAr] |   [MW] |   [MVAr] |   [MW] |   [MVAr] |
|----------|----------|--------|--------|----------|--------|----------|--------|----------|
| Branch 1 | Bus 1    | Bus 3  |  29.23 |    -0.96 | -29.05 |    -1.85 |   0.18 |     1.96 |
| Branch 2 | Bus 1    | Bus 2  |  15.87 |   -18.46 | -15.59 |    15.71 |   0.27 |     1.20 |
| Branch 3 | Bus 2    | Bus 3  |  13.19 |    12.67 | -13.04 |   -15.76 |   0.15 |     0.84 |
| Branch 4 | Bus 3    | Bus 4  |  42.00 |    25.37 | -42.00 |   -20.00 |   0.00 |     5.37 |
|------------------------------------------------------------------------------------------|</code></pre><p>Compared to the base case, the directions of active power flows remain unchanged, but their magnitudes differ. For reactive power, the values change, and the flow at <code>Branch 1</code> on the <code>Bus 1</code> side reverses, as shown in Figure 3.</p><div class="image-container">
    <div class="image-item">
        <img src="../../assets/examples/acPowerFlow/4bus_power_active.svg" class="my-svg"/>
        <p>(a) Active powers.</p>
    </div>
    <div class="image-item">
        <img src="../../assets/examples/acPowerFlow/4bus_power_reactive.svg" class="my-svg"/>
        <p>(b) Reactive powers.</p>
    </div>
    <p style="text-align: center; margin-top: -5px;">
    Figure 3: Power flows in the 4-bus power system with modified supplies and demands.
    </p>
</div><hr/><h2 id="Modifying-Network-Topology"><a class="docs-heading-anchor" href="#Modifying-Network-Topology">Modifying Network Topology</a><a id="Modifying-Network-Topology-1"></a><a class="docs-heading-anchor-permalink" href="#Modifying-Network-Topology" title="Permalink"></a></h2><p>Next, we will take <code>Branch 3</code> out of service. Although we could update the power system model and the fast Newton-Raphson method simultaneously, to demonstrate flexibility, we will solve this scenario using the Newton-Raphson method. As a result, we will only update the power system model:</p><pre><code class="language-julia hljs">updateBranch!(system; label = &quot;Branch 3&quot;, status = 0)</code></pre><p>Now, let us define the Newton-Raphson model:</p><pre><code class="language-julia hljs">nr = newtonRaphson(system)</code></pre><p>When the model is created, we also initialize the Newton-Raphson method, with the initial voltage magnitudes and angles corresponding to the values defined when the power system model was first created. If we want to use the results from the fast Newton-Raphson method and start the Newton-Raphson method with a warm start, we can transfer the voltage magnitudes and angles:</p><pre><code class="language-julia hljs">setInitialPoint!(nr, fnr)</code></pre><p>Now, we can solve the AC power flow for this scenario:</p><pre><code class="language-julia hljs">powerFlow!(nr; power = true)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">EXIT: The solution was found using the Newton-Raphson method in 3 iterations.</code></pre><p>To display how the power flows are distributed when one branch is out of service, we use the following:</p><pre><code class="language-julia hljs">printBranchData(nr; show = show2, fmt = fmt2)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">|------------------------------------------------------------------------------------------|
| Branch Data                                                                              |
|------------------------------------------------------------------------------------------|
|            Label             |  From-Bus Power   |   To-Bus Power    |   Series Power    |
|                              |                   |                   |                   |
|   Branch | From-Bus | To-Bus | Active | Reactive | Active | Reactive | Active | Reactive |
|          |          |        |   [MW] |   [MVAr] |   [MW] |   [MVAr] |   [MW] |   [MVAr] |
|----------|----------|--------|--------|----------|--------|----------|--------|----------|
| Branch 1 | Bus 1    | Bus 3  |  42.56 |    19.70 | -42.09 |   -18.98 |   0.48 |     5.27 |
| Branch 2 | Bus 1    | Bus 2  |   2.50 |   -15.82 |  -2.40 |    12.31 |   0.10 |     0.46 |
| Branch 3 | Bus 2    | Bus 3  |   0.00 |     0.00 |   0.00 |     0.00 |   0.00 |     0.00 |
| Branch 4 | Bus 3    | Bus 4  |  42.00 |    26.01 | -42.00 |   -20.00 |   0.00 |     6.01 |
|------------------------------------------------------------------------------------------|</code></pre><p>Compared to the previous cases, we observe that the reactive power flow at <code>Branch 1</code> on the <code>Bus 1</code> side reverses direction due to the outage of <code>Branch 3</code>, as shown in Figure 4.</p><div class="image-container">
    <div class="image-item">
        <img src="../../assets/examples/acPowerFlow/4bus_service_active.svg" class="my-svg"/>
        <p>(a) Active powers.</p>
    </div>
    <div class="image-item">
        <img src="../../assets/examples/acPowerFlow/4bus_service_reactive.svg" class="my-svg"/>
        <p>(b) Reactive powers.</p>
    </div>
    <p style="text-align: center; margin-top: -5px;">
    Figure 4: Power flows in the 4-bus power system with modified network topology.
    </p>
</div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../powerSystemDatasets/">« Power System Datasets</a><a class="docs-footer-nextpage" href="../dcPowerFlow/">DC Power Flow »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.10.1 on <span class="colophon-date" title="Monday 21 April 2025 12:34">Monday 21 April 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
