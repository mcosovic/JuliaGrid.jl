<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>AC State Estimation · JuliaGrid</title><meta name="title" content="AC State Estimation · JuliaGrid"/><meta property="og:title" content="AC State Estimation · JuliaGrid"/><meta property="twitter:title" content="AC State Estimation · JuliaGrid"/><meta name="description" content="Documentation for JuliaGrid."/><meta property="og:description" content="Documentation for JuliaGrid."/><meta property="twitter:description" content="Documentation for JuliaGrid."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/tablestyle.css" rel="stylesheet" type="text/css"/><link href="../../assets/citations.css" rel="stylesheet" type="text/css"/><link href="../../assets/subfigure.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="JuliaGrid logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">JuliaGrid</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/powerSystemModel/">Power System Model</a></li><li><a class="tocitem" href="../../manual/acPowerFlow/">AC Power Flow</a></li><li><a class="tocitem" href="../../manual/dcPowerFlow/">DC Power Flow</a></li><li><a class="tocitem" href="../../manual/acOptimalPowerFlow/">AC Optimal Power Flow</a></li><li><a class="tocitem" href="../../manual/dcOptimalPowerFlow/">DC Optimal Power Flow</a></li><li><a class="tocitem" href="../../manual/measurementModel/">Measurement Model</a></li><li><a class="tocitem" href="../../manual/observability/">Observability Analysis</a></li><li><a class="tocitem" href="../../manual/acStateEstimation/">AC State Estimation</a></li><li><a class="tocitem" href="../../manual/pmuStateEstimation/">PMU State Estimation</a></li><li><a class="tocitem" href="../../manual/dcStateEstimation/">DC State Estimation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/powerSystemModel/">Power System Model</a></li><li><a class="tocitem" href="../../tutorials/acPowerFlow/">AC Power Flow</a></li><li><a class="tocitem" href="../../tutorials/dcPowerFlow/">DC Power Flow</a></li><li><a class="tocitem" href="../../tutorials/acOptimalPowerFlow/">AC Optimal Power Flow</a></li><li><a class="tocitem" href="../../tutorials/dcOptimalPowerFlow/">DC Optimal Power Flow</a></li><li><a class="tocitem" href="../../tutorials/measurementModel/">Measurement Model</a></li><li><a class="tocitem" href="../../tutorials/observability/">Observability Analysis</a></li><li><a class="tocitem" href="../../tutorials/acStateEstimation/">AC State Estimation</a></li><li><a class="tocitem" href="../../tutorials/pmuStateEstimation/">PMU State Estimation</a></li><li><a class="tocitem" href="../../tutorials/dcStateEstimation/">DC State Estimation</a></li><li><a class="tocitem" href="../../tutorials/perunit/">Per-Unit System</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../powerSystemDatasets/">Power System Datasets</a></li><li><a class="tocitem" href="../acPowerFlow/">AC Power Flow</a></li><li><a class="tocitem" href="../dcPowerFlow/">DC Power Flow</a></li><li><a class="tocitem" href="../acOptimalPowerFlow/">AC Optimal Power Flow</a></li><li><a class="tocitem" href="../dcOptimalPowerFlow/">DC Optimal Power Flow</a></li><li><a class="tocitem" href="../observability/">Observability Analysis</a></li><li class="is-active"><a class="tocitem" href>AC State Estimation</a><ul class="internal"><li><a class="tocitem" href="#Measurement-Model"><span>Measurement Model</span></a></li><li><a class="tocitem" href="#Base-Case-Analysis"><span>Base Case Analysis</span></a></li><li><a class="tocitem" href="#Modifying-Measurement-Data"><span>Modifying Measurement Data</span></a></li><li><a class="tocitem" href="#Modifying-Measurement-Set"><span>Modifying Measurement Set</span></a></li></ul></li><li><a class="tocitem" href="../pmuStateEstimation/">PMU State Estimation</a></li><li><a class="tocitem" href="../dcStateEstimation/">DC State Estimation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/powerSystemModel/">Power System Model</a></li><li><a class="tocitem" href="../../api/powerFlow/">Power Flow</a></li><li><a class="tocitem" href="../../api/optimalPowerFlow/">Optimal Power Flow</a></li><li><a class="tocitem" href="../../api/measurementModel/">Measurement Model</a></li><li><a class="tocitem" href="../../api/stateEstimation/">State Estimation</a></li><li><a class="tocitem" href="../../api/analysis/">Power and Current Analysis</a></li><li><a class="tocitem" href="../../api/setupPrint/">Setup and Print</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Background</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../background/installation/">Installation Guide</a></li><li><a class="tocitem" href="../../background/bibliography/">Bibliography</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>AC State Estimation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>AC State Estimation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/mcosovic/JuliaGrid.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/mcosovic/JuliaGrid.jl/blob/master/docs/src/examples/acStateEstimation.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="ACStateEstimationExamples"><a class="docs-heading-anchor" href="#ACStateEstimationExamples">AC State Estimation</a><a id="ACStateEstimationExamples-1"></a><a class="docs-heading-anchor-permalink" href="#ACStateEstimationExamples" title="Permalink"></a></h1><p>In this example, we analyze a 3-bus power system, shown in Figure 1. The objective is to estimate bus voltage magnitudes and angles for a given measurement configuration.</p><div style="text-align: center;">
    <img src="../../assets/acStateEstimation/3bus_meter.svg" width="320"/>
    <p>Figure 1: The 3-bus power system with the given measurement configuration.</p>
</div>
&nbsp;<p>The measurement set consists of <code>Meter 1</code>, <code>Meter 2</code>, and <code>Meter 3</code>, each measuring active and reactive power injection as well as bus voltage magnitude. Additionally, <code>Meter 4</code> and <code>Meter 5</code> measure active and reactive power flows along with current magnitudes.</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>Users can download a Julia script containing the scenarios from this section using the following <a href="https://github.com/mcosovic/JuliaGrid.jl/raw/refs/heads/master/docs/src/examples/analyses/acStateEstimation.jl">link</a>.</p></div></div><p>We define the power system, specify buses and branches, and assign the generator to the slack bus:</p><pre><code class="language-julia hljs">system = powerSystem()

addBus!(system; label = &quot;Bus 1&quot;, magnitude = 1.01, angle = 0.0, type = 3)
addBus!(system; label = &quot;Bus 2&quot;, magnitude = 0.92, angle = -0.04)
addBus!(system; label = &quot;Bus 3&quot;, magnitude = 0.93, angle = -0.05)

@branch(reactance = 0.03)
addBranch!(system; label = &quot;Branch 1&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 3&quot;, resistance = 0.02)
addBranch!(system; label = &quot;Branch 2&quot;, from = &quot;Bus 1&quot;, to = &quot;Bus 2&quot;, resistance = 0.05)
addBranch!(system; label = &quot;Branch 3&quot;, from = &quot;Bus 2&quot;, to = &quot;Bus 3&quot;, resistance = 0.04)

addGenerator!(system; label = &quot;Generator 1&quot;, bus = &quot;Bus 1&quot;)</code></pre><p>The <code>magnitude</code> and <code>angle</code> values define the initial point for the iterative AC state estimation algorithm, while the angle of the slack bus (<code>type = 3</code>) remains fixed at the specified value.</p><hr/><h5 id="Display-Data-Settings"><a class="docs-heading-anchor" href="#Display-Data-Settings">Display Data Settings</a><a id="Display-Data-Settings-1"></a><a class="docs-heading-anchor-permalink" href="#Display-Data-Settings" title="Permalink"></a></h5><p>Before running simulations, we configure the data display settings:</p><pre><code class="language-julia hljs">show = Dict(&quot;Shunt Power&quot; =&gt; false, &quot;Status&quot; =&gt; false)</code></pre><hr/><h2 id="Measurement-Model"><a class="docs-heading-anchor" href="#Measurement-Model">Measurement Model</a><a id="Measurement-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Measurement-Model" title="Permalink"></a></h2><p>The first question is how to obtain measurement data, specifically values. These can either be predefined or generated artificially. This example explores different approaches for defining measurement data.</p><p>One way to obtain measurement data is by solving the power system to determine exact electrical quantities, which will serve as the source for measurements. More precisely, AC power flow analysis is used to compute voltages and powers, and these exact values are then used to generate measurement data.</p><p>To begin, let us initialize the measurement variable:</p><pre><code class="language-julia hljs">device = measurement()</code></pre><hr/><h5 id="AC-Power-Flow"><a class="docs-heading-anchor" href="#AC-Power-Flow">AC Power Flow</a><a id="AC-Power-Flow-1"></a><a class="docs-heading-anchor-permalink" href="#AC-Power-Flow" title="Permalink"></a></h5><p>AC power flow analysis requires generator and load data. The system configuration is shown in Figure 2.</p><div style="text-align: center;">
    <img src="../../assets/acStateEstimation/3bus.svg" width="350"/>
    <p>Figure 2: The 3-bus power system.</p>
</div>
&nbsp;<p>Data for loads and generators is added as follows:</p><pre><code class="language-julia hljs">updateBus!(system; label = &quot;Bus 2&quot;, type = 1, active = 1.1, reactive = 0.3)
updateBus!(system; label = &quot;Bus 3&quot;, type = 1, active = 2.3, reactive = 0.2)

updateGenerator!(system; label = &quot;Generator 1&quot;, active = 3.3, reactive = 2.1)</code></pre><p>Next, AC power flow analysis is performed to obtain bus voltages:</p><pre><code class="language-julia hljs">acModel!(system)

powerFlow = newtonRaphson(system)
powerFlow!(system, powerFlow; verbose = 1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">EXIT: The solution was found using the Newton-Raphson method in 3 iterations.</code></pre><hr/><h5 id="Bus-Voltage-Magnitude-Measurements"><a class="docs-heading-anchor" href="#Bus-Voltage-Magnitude-Measurements">Bus Voltage Magnitude Measurements</a><a id="Bus-Voltage-Magnitude-Measurements-1"></a><a class="docs-heading-anchor-permalink" href="#Bus-Voltage-Magnitude-Measurements" title="Permalink"></a></h5><p>First, let us examine the results obtained from AC power flow, as these voltage magnitude values will be used to generate measurements:</p><pre><code class="language-julia hljs">printBusData(system, powerFlow)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">|-----------------------------|
| Bus Data                    |
|-----------------------------|
| Label |       Voltage       |
|       |                     |
|   Bus | Magnitude |   Angle |
|       |      [pu] |   [rad] |
|-------|-----------|---------|
| Bus 1 |    1.0000 |  0.0000 |
| Bus 2 |    0.9324 | -0.0399 |
| Bus 3 |    0.9360 | -0.0586 |
|-----------------------------|</code></pre><p>One way to obtain measurements is by creating all bus voltage magnitude measurements using a function that directly utilizes the results from AC power flow:</p><pre><code class="language-julia hljs">@voltmeter(label = &quot;Meter ?&quot;)
addVoltmeter!(system, device, powerFlow; variance = 1e-4, noise = true)</code></pre><p>By setting <code>noise = true</code>, white Gaussian noise with <code>variance = 1e-4</code> is added to the exact bus voltage magnitude values to generate measurement values:</p><pre><code class="language-julia hljs">printVoltmeterData(system, device)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">|-------------------------------------------|
| Voltmeter Data                            |
|-------------------------------------------|
|  Label  |        Voltage Magnitude        |
|         |                                 |
|         | Measurement | Variance | Status |
|         |        [pu] |     [pu] |        |
|---------|-------------|----------|--------|
| Meter 1 |      0.9896 | 1.00e-04 |      1 |
| Meter 2 |      0.9375 | 1.00e-04 |      1 |
| Meter 3 |      0.9240 | 1.00e-04 |      1 |
|-------------------------------------------|</code></pre><hr/><h5 id="Active-and-Reactive-Power-Measurements"><a class="docs-heading-anchor" href="#Active-and-Reactive-Power-Measurements">Active and Reactive Power Measurements</a><a id="Active-and-Reactive-Power-Measurements-1"></a><a class="docs-heading-anchor-permalink" href="#Active-and-Reactive-Power-Measurements" title="Permalink"></a></h5><p>Active and reactive power injection measurements can be created using the same method as for voltage magnitude measurements, where we first utilize the function <a href="../../api/analysis/#JuliaGrid.power!-Tuple{PowerSystem, ACPowerFlow}"><code>power!</code></a>. However, in this case, we take a different approach, adding measurements one by one to <code>Meter 1</code>, <code>Meter 2</code>, and <code>Meter 3</code> using data from AC power flow:</p><pre><code class="language-julia hljs">@wattmeter(label = &quot;Meter ?&quot;)
@varmeter(label = &quot;Meter ?&quot;)

for (label, idx) in system.bus.label
    Pᵢ, Qᵢ = injectionPower(system, powerFlow; label)
    addWattmeter!(system, device; bus = label, active = Pᵢ, variance = 1e-3, noise = true)
    addVarmeter!(system, device; bus = label, reactive = Qᵢ, variance = 1e-4, noise = true)
end</code></pre><p>Next, we define active and reactive power flow measurements at <code>Branch 1</code> for both the from-bus and to-bus ends. Again, we use data from AC power flow, computing the powers and using exact values to generate measurements. The default setting <code>noise = false</code> remains unchanged, meaning exact values are used:</p><pre><code class="language-julia hljs">Pᵢⱼ, Qᵢⱼ = fromPower(system, powerFlow; label = &quot;Branch 1&quot;)
addWattmeter!(system, device; label = &quot;Meter 4&quot;, from = &quot;Branch 1&quot;, active = Pᵢⱼ)
addVarmeter!(system, device; label = &quot;Meter 4&quot;, from = &quot;Branch 1&quot;, reactive = Qᵢⱼ)

Pⱼᵢ, Qⱼᵢ = toPower(system, powerFlow; label = &quot;Branch 1&quot;)
addWattmeter!(system, device; label = &quot;Meter 5&quot;, to = &quot;Branch 1&quot;, active = Pⱼᵢ)
addVarmeter!(system, device; label = &quot;Meter 5&quot;, to = &quot;Branch 1&quot;, reactive = Qⱼᵢ)</code></pre><p>As a result, we obtain the set of active power measurements:</p><pre><code class="language-julia hljs">printWattmeterData(system, device)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">|-------------------------------------------|
| Wattmeter Data                            |
|-------------------------------------------|
|  Label  |          Active Power           |
|         |                                 |
|         | Measurement | Variance | Status |
|         |        [pu] |     [pu] |        |
|---------|-------------|----------|--------|
| Meter 1 |      3.6377 | 1.00e-03 |      1 |
| Meter 2 |     -1.1538 | 1.00e-03 |      1 |
| Meter 3 |     -2.3119 | 1.00e-03 |      1 |
| Meter 4 |      2.2734 | 1.00e-04 |      1 |
| Meter 5 |     -2.1610 | 1.00e-04 |      1 |
|-------------------------------------------|</code></pre><p>The set of reactive power measurements can be viewed as follows:</p><pre><code class="language-julia hljs">printVarmeterData(system, device)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">|-------------------------------------------|
| Varmeter Data                             |
|-------------------------------------------|
|  Label  |         Reactive Power          |
|         |                                 |
|         | Measurement | Variance | Status |
|         |        [pu] |     [pu] |        |
|---------|-------------|----------|--------|
| Meter 1 |      0.7406 | 1.00e-04 |      1 |
| Meter 2 |     -0.2966 | 1.00e-04 |      1 |
| Meter 3 |     -0.2152 | 1.00e-04 |      1 |
| Meter 4 |      0.6706 | 1.00e-04 |      1 |
| Meter 5 |     -0.5021 | 1.00e-04 |      1 |
|-------------------------------------------|</code></pre><hr/><h5 id="Current-Magnitude-Measurements"><a class="docs-heading-anchor" href="#Current-Magnitude-Measurements">Current Magnitude Measurements</a><a id="Current-Magnitude-Measurements-1"></a><a class="docs-heading-anchor-permalink" href="#Current-Magnitude-Measurements" title="Permalink"></a></h5><p>Finally, current magnitude measurements need to be defined at <code>Branch 1</code> for both the from-bus and to-bus ends. Here, we assume these values are known in advance and provide them directly to the functions:</p><pre><code class="language-julia hljs">@ammeter(statusFrom = 0, statusTo = 0)

addAmmeter!(system, device; label = &quot;Meter 4&quot;, from = &quot;Branch 1&quot;, magnitude = 1.36)
addAmmeter!(system, device; label = &quot;Meter 5&quot;, to = &quot;Branch 1&quot;, magnitude = 2.37)</code></pre><p>For current magnitude measurements, we set <code>statusFrom = 0</code> and <code>statusTo = 0</code>, indicating that these measurements are out-of-service and do not influence state estimation. However, even though they do not impact the computation, they still occupy positions in the matrices and vectors used for state estimation. If there is no plan to put these measurements in-service later, it is advisable to exclude them from the measurement set.</p><p>The obtained set of current magnitude measurements is:</p><pre><code class="language-julia hljs">printAmmeterData(system, device)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">|-------------------------------------------|
| Ammeter Data                              |
|-------------------------------------------|
|  Label  |        Current Magnitude        |
|         |                                 |
|         | Measurement | Variance | Status |
|         |        [pu] |     [pu] |        |
|---------|-------------|----------|--------|
| Meter 4 |      1.3600 | 1.00e-04 |      0 |
| Meter 5 |      2.3700 | 1.00e-04 |      0 |
|-------------------------------------------|</code></pre><hr/><h2 id="Base-Case-Analysis"><a class="docs-heading-anchor" href="#Base-Case-Analysis">Base Case Analysis</a><a id="Base-Case-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Base-Case-Analysis" title="Permalink"></a></h2><p>After collecting the measurements, we solve the AC state estimation by initializing the Gauss-Newton method and running the iterative algorithm to estimate bus voltages. The obtained results are then used to compute powers:</p><pre><code class="language-julia hljs">analysis = gaussNewton(system, device)
stateEstimation!(system, analysis; power = true, verbose = 2)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Number of entries in the Jacobian matrix: 63
Number of measurement functions:          15
Number of state variables:                 5
Number of buses:                           3
Number of branches:                        3

Iteration   Maximum Increment   Objective Value
        1          1.5913e-02    1.25590597e+04
        2          1.3941e-03    6.69578498e+00
        3          1.2847e-06    5.13629296e+00
        4          2.4706e-09    5.13628973e+00

                     Minimum Value   Maximum Value
Magnitude Increment:    2.2239e-09      2.4706e-09
Angle Increment:        2.6681e-10      2.8601e-10

EXIT: The solution was found using the Gauss-Newton method in 4 iterations.</code></pre><p>This allows users to observe estimated bus voltages along with power values associated with buses:</p><pre><code class="language-julia hljs">printBusData(system, analysis; show)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">|-------------------------------------------------------------------------------------------|
| Bus Data                                                                                  |
|-------------------------------------------------------------------------------------------|
| Label |       Voltage       |  Power Generation  |   Power Demand    |  Power Injection   |
|       |                     |                    |                   |                    |
|   Bus | Magnitude |   Angle |  Active | Reactive | Active | Reactive |  Active | Reactive |
|       |      [pu] |   [rad] |    [pu] |     [pu] |   [pu] |     [pu] |    [pu] |     [pu] |
|-------|-----------|---------|---------|----------|--------|----------|---------|----------|
| Bus 1 |    0.9952 |  0.0000 |  3.6297 |   0.7353 | 0.0000 |   0.0000 |  3.6297 |   0.7353 |
| Bus 2 |    0.9263 | -0.0410 | -0.0367 |   0.0041 | 1.1000 |   0.3000 | -1.1367 |  -0.2959 |
| Bus 3 |    0.9306 | -0.0591 |  0.0184 |  -0.0093 | 2.3000 |   0.2000 | -2.2816 |  -0.2093 |
|-------------------------------------------------------------------------------------------|</code></pre><p>Power flows at branches can also be examined:</p><pre><code class="language-julia hljs">printBranchData(system, analysis; show)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">|-------------------------------------------------------------------------------------------|
| Branch Data                                                                               |
|-------------------------------------------------------------------------------------------|
|            Label             |  From-Bus Power   |    To-Bus Power    |   Series Power    |
|                              |                   |                    |                   |
|   Branch | From-Bus | To-Bus | Active | Reactive |  Active | Reactive | Active | Reactive |
|          |          |        |   [pu] |     [pu] |    [pu] |     [pu] |   [pu] |     [pu] |
|----------|----------|--------|--------|----------|---------|----------|--------|----------|
| Branch 1 | Bus 1    | Bus 3  | 2.2758 |   0.6793 | -2.1619 |  -0.5084 | 0.1139 |   0.1708 |
| Branch 2 | Bus 1    | Bus 2  | 1.3539 |   0.0560 | -1.2612 |  -0.0004 | 0.0927 |   0.0556 |
| Branch 3 | Bus 2    | Bus 3  | 0.1245 |  -0.2955 | -0.1197 |   0.2991 | 0.0048 |   0.0036 |
|-------------------------------------------------------------------------------------------|</code></pre><p>Additionally, users can retrieve results related to measurement devices. For instance, estimated values and corresponding residuals for wattmeters can be displayed:</p><pre><code class="language-julia hljs">printWattmeterData(system, device, analysis)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">|-----------------------------------------------------------------|
| Wattmeter Data                                                  |
|-----------------------------------------------------------------|
|  Label  |                     Active Power                      |
|         |                                                       |
|         | Measurement | Variance | Estimate | Residual | Status |
|         |        [pu] |     [pu] |     [pu] |     [pu] |        |
|---------|-------------|----------|----------|----------|--------|
| Meter 1 |      3.6377 | 1.00e-03 |   3.6297 |   0.0080 |      1 |
| Meter 2 |     -1.1538 | 1.00e-03 |  -1.1367 |  -0.0171 |      1 |
| Meter 3 |     -2.3119 | 1.00e-03 |  -2.2816 |  -0.0303 |      1 |
| Meter 4 |      2.2734 | 1.00e-04 |   2.2758 |  -0.0024 |      1 |
| Meter 5 |     -2.1610 | 1.00e-04 |  -2.1619 |   0.0009 |      1 |
|-----------------------------------------------------------------|</code></pre><hr/><h2 id="Modifying-Measurement-Data"><a class="docs-heading-anchor" href="#Modifying-Measurement-Data">Modifying Measurement Data</a><a id="Modifying-Measurement-Data-1"></a><a class="docs-heading-anchor-permalink" href="#Modifying-Measurement-Data" title="Permalink"></a></h2><p>Measurement values and variances will now be updated. Instead of recreating the measurement set and the Gauss-Newton method from the beginning, both models will be modified simultaneously:</p><pre><code class="language-julia hljs">updateVoltmeter!(system, device, analysis; label = &quot;Meter 1&quot;, magnitude = 1.0, noise = false)
updateWattmeter!(system, device, analysis; label = &quot;Meter 2&quot;, active = -1.1, variance = 1e-6)
updateVarmeter!(system, device, analysis; label = &quot;Meter 3&quot;, variance = 1e-1)</code></pre><p>These updates demonstrate the flexibility of JuliaGrid in modifying measurements. For the voltmeter, we now generate a measurement without adding noise, for the wattmeter, we change both the value and variance, while the varmeter retains its previous value with only a variance adjustment.</p><p>Next, AC state estimation is run again to compute the new estimate without recreating the Gauss-Newton model. Additionally, this step initializes the iterative algorithm with a warm start, as the initial voltage magnitudes and angles correspond to the solution from the base case analysis:</p><pre><code class="language-julia hljs">stateEstimation!(system, analysis; power = true, verbose = 1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">EXIT: The solution was found using the Gauss-Newton method in 3 iterations.</code></pre><p>Bus-related data can now be examined:</p><pre><code class="language-julia hljs">printBusData(system, analysis; show)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">|-------------------------------------------------------------------------------------------|
| Bus Data                                                                                  |
|-------------------------------------------------------------------------------------------|
| Label |       Voltage       |  Power Generation  |   Power Demand    |  Power Injection   |
|       |                     |                    |                   |                    |
|   Bus | Magnitude |   Angle |  Active | Reactive | Active | Reactive |  Active | Reactive |
|       |      [pu] |   [rad] |    [pu] |     [pu] |   [pu] |     [pu] |    [pu] |     [pu] |
|-------|-----------|---------|---------|----------|--------|----------|---------|----------|
| Bus 1 |    0.9972 |  0.0000 |  3.6111 |   0.7333 | 0.0000 |   0.0000 |  3.6111 |   0.7333 |
| Bus 2 |    0.9293 | -0.0402 | -0.0000 |  -0.0001 | 1.1000 |   0.3000 | -1.1000 |  -0.3001 |
| Bus 3 |    0.9328 | -0.0589 | -0.0029 |  -0.0055 | 2.3000 |   0.2000 | -2.3029 |  -0.2055 |
|-------------------------------------------------------------------------------------------|</code></pre><hr/><h2 id="Modifying-Measurement-Set"><a class="docs-heading-anchor" href="#Modifying-Measurement-Set">Modifying Measurement Set</a><a id="Modifying-Measurement-Set-1"></a><a class="docs-heading-anchor-permalink" href="#Modifying-Measurement-Set" title="Permalink"></a></h2><p>Now, we modify the measurement set by including current magnitude measurements:</p><pre><code class="language-julia hljs">updateAmmeter!(system, device, analysis; label = &quot;Meter 4&quot;, status = 1)
updateAmmeter!(system, device, analysis; label = &quot;Meter 5&quot;, status = 1)</code></pre><p>We then solve the AC state estimation again:</p><pre><code class="language-julia hljs">stateEstimation!(system, analysis; power = true, verbose = 1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">EXIT: The solution was found using the Gauss-Newton method in 9 iterations.</code></pre><p>Bus-related data can now be examined:</p><pre><code class="language-julia hljs">printBusData(system, analysis; show)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">|-------------------------------------------------------------------------------------------|
| Bus Data                                                                                  |
|-------------------------------------------------------------------------------------------|
| Label |       Voltage       |  Power Generation  |   Power Demand    |  Power Injection   |
|       |                     |                    |                   |                    |
|   Bus | Magnitude |   Angle |  Active | Reactive | Active | Reactive |  Active | Reactive |
|       |      [pu] |   [rad] |    [pu] |     [pu] |   [pu] |     [pu] |    [pu] |     [pu] |
|-------|-----------|---------|---------|----------|--------|----------|---------|----------|
| Bus 1 |    1.1354 |  0.0000 |  3.4560 |   0.7033 | 0.0000 |   0.0000 |  3.4560 |   0.7033 |
| Bus 2 |    1.0775 | -0.0292 | -0.0001 |  -0.0170 | 1.1000 |   0.3000 | -1.1001 |  -0.3170 |
| Bus 3 |    1.0812 | -0.0425 |  0.0915 |  -0.0260 | 2.3000 |   0.2000 | -2.2085 |  -0.2260 |
|-------------------------------------------------------------------------------------------|</code></pre><p>The bus voltage estimates appear suspicious, indicating the presence of bad data among the newly added ammeter measurements. To address this, we perform bad data processing:</p><pre><code class="language-julia hljs">outlier = residualTest!(system, device, analysis; threshold = 4.0)</code></pre><p>An outlier with a significantly high normalized residual is detected, specifically related to the current magnitude measurements in <code>Meter 4</code>:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; outlier.detect</code><code class="nohighlight hljs ansi" style="display:block;">true</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; outlier.maxNormalizedResidual</code><code class="nohighlight hljs ansi" style="display:block;">79.20114481944132</code></pre><p>The bad data processing function automatically removes the detected outlier. Before repeating the AC state estimation, using a warm start is not advisable, as the previous state was obtained in the presence of bad data. Instead, it is useful to reset the initial point, for example, by using the values defined within the power system data:</p><pre><code class="language-julia hljs">setInitialPoint!(system, analysis)
stateEstimation!(system, analysis; power = true, verbose = 1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">EXIT: The solution was found using the Gauss-Newton method in 5 iterations.</code></pre><p>Observing the bus-related data, we can confirm that the results now align with expectations, as the measurement set is free from bad data:</p><pre><code class="language-julia hljs">printBusData(system, analysis; show)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">|-------------------------------------------------------------------------------------------|
| Bus Data                                                                                  |
|-------------------------------------------------------------------------------------------|
| Label |       Voltage       |  Power Generation  |   Power Demand    |  Power Injection   |
|       |                     |                    |                   |                    |
|   Bus | Magnitude |   Angle |  Active | Reactive | Active | Reactive |  Active | Reactive |
|       |      [pu] |   [rad] |    [pu] |     [pu] |   [pu] |     [pu] |    [pu] |     [pu] |
|-------|-----------|---------|---------|----------|--------|----------|---------|----------|
| Bus 1 |    0.9997 |  0.0000 |  3.6085 |   0.7328 | 0.0000 |   0.0000 |  3.6085 |   0.7328 |
| Bus 2 |    0.9320 | -0.0399 | -0.0000 |  -0.0004 | 1.1000 |   0.3000 | -1.1000 |  -0.3004 |
| Bus 3 |    0.9355 | -0.0585 | -0.0016 |  -0.0061 | 2.3000 |   0.2000 | -2.3016 |  -0.2061 |
|-------------------------------------------------------------------------------------------|</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../observability/">« Observability Analysis</a><a class="docs-footer-nextpage" href="../pmuStateEstimation/">PMU State Estimation »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Friday 7 March 2025 22:56">Friday 7 March 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
