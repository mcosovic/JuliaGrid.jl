<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Optimal Power Flow · JuliaGrid</title><meta name="title" content="Optimal Power Flow · JuliaGrid"/><meta property="og:title" content="Optimal Power Flow · JuliaGrid"/><meta property="twitter:title" content="Optimal Power Flow · JuliaGrid"/><meta name="description" content="Documentation for JuliaGrid."/><meta property="og:description" content="Documentation for JuliaGrid."/><meta property="twitter:description" content="Documentation for JuliaGrid."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/style.css" rel="stylesheet" type="text/css"/><link href="../../assets/citations.css" rel="stylesheet" type="text/css"/><link href="../../assets/subfigure.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="JuliaGrid logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">JuliaGrid</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/powerSystemModel/">Power System Model</a></li><li><a class="tocitem" href="../../manual/acPowerFlow/">AC Power Flow</a></li><li><a class="tocitem" href="../../manual/dcPowerFlow/">DC Power Flow</a></li><li><a class="tocitem" href="../../manual/acOptimalPowerFlow/">AC Optimal Power Flow</a></li><li><a class="tocitem" href="../../manual/dcOptimalPowerFlow/">DC Optimal Power Flow</a></li><li><a class="tocitem" href="../../manual/measurementModel/">Measurement Model</a></li><li><a class="tocitem" href="../../manual/observabilityAnalysis/">Observability Analysis</a></li><li><a class="tocitem" href="../../manual/acStateEstimation/">AC State Estimation</a></li><li><a class="tocitem" href="../../manual/pmuStateEstimation/">PMU State Estimation</a></li><li><a class="tocitem" href="../../manual/dcStateEstimation/">DC State Estimation</a></li><li><a class="tocitem" href="../../manual/badDataAnalysis/">Bad Data Analysis</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/powerSystemModel/">Power System Model</a></li><li><a class="tocitem" href="../../tutorials/acPowerFlow/">AC Power Flow</a></li><li><a class="tocitem" href="../../tutorials/dcPowerFlow/">DC Power Flow</a></li><li><a class="tocitem" href="../../tutorials/acOptimalPowerFlow/">AC Optimal Power Flow</a></li><li><a class="tocitem" href="../../tutorials/dcOptimalPowerFlow/">DC Optimal Power Flow</a></li><li><a class="tocitem" href="../../tutorials/measurementModel/">Measurement Model</a></li><li><a class="tocitem" href="../../tutorials/observabilityAnalysis/">Observability Analysis</a></li><li><a class="tocitem" href="../../tutorials/acStateEstimation/">AC State Estimation</a></li><li><a class="tocitem" href="../../tutorials/pmuStateEstimation/">PMU State Estimation</a></li><li><a class="tocitem" href="../../tutorials/dcStateEstimation/">DC State Estimation</a></li><li><a class="tocitem" href="../../tutorials/badDataAnalysis/">Bad Data Analysis</a></li><li><a class="tocitem" href="../../tutorials/perunit/">Per-Unit System</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/powerSystemDatasets/">Power System Datasets</a></li><li><a class="tocitem" href="../../examples/acPowerFlow/">AC Power Flow</a></li><li><a class="tocitem" href="../../examples/dcPowerFlow/">DC Power Flow</a></li><li><a class="tocitem" href="../../examples/acOptimalPowerFlow/">AC Optimal Power Flow</a></li><li><a class="tocitem" href="../../examples/dcOptimalPowerFlow/">DC Optimal Power Flow</a></li><li><a class="tocitem" href="../../examples/observabilityAnalysis/">Observability Analysis</a></li><li><a class="tocitem" href="../../examples/acStateEstimation/">AC State Estimation</a></li><li><a class="tocitem" href="../../examples/pmuStateEstimation/">PMU State Estimation</a></li><li><a class="tocitem" href="../../examples/dcStateEstimation/">DC State Estimation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox" checked/><label class="tocitem" for="menuitem-5"><span class="docs-label">API Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../powerSystemModel/">Power System Model</a></li><li><a class="tocitem" href="../powerFlow/">Power Flow</a></li><li class="is-active"><a class="tocitem" href>Optimal Power Flow</a><ul class="internal"><li><a class="tocitem" href="#AC-Optimal-Power-Flow-2"><span>AC Optimal Power Flow</span></a></li><li><a class="tocitem" href="#DC-Optimal-Power-Flow-2"><span>DC Optimal Power Flow</span></a></li><li><a class="tocitem" href="#Extended-Formulation-2"><span>Extended Formulation</span></a></li><li><a class="tocitem" href="#Utility-Functions-2"><span>Utility Functions</span></a></li></ul></li><li><a class="tocitem" href="../measurementModel/">Measurement Model</a></li><li><a class="tocitem" href="../stateEstimation/">State Estimation</a></li><li><a class="tocitem" href="../analysis/">Powers and Currents</a></li><li><a class="tocitem" href="../setupPrint/">Setup and Print</a></li><li><a class="tocitem" href="../publicTypes/">Public Types</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Background</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../background/installation/">Installation Guide</a></li><li><a class="tocitem" href="../../background/bibliography/">Bibliography</a></li><li><a class="tocitem" href="../../background/releasenotes/">Release Notes</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API Reference</a></li><li class="is-active"><a href>Optimal Power Flow</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Optimal Power Flow</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/mcosovic/JuliaGrid.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/mcosovic/JuliaGrid.jl/blob/master/docs/src/api/optimalPowerFlow.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="OptimalPowerFlowAPI"><a class="docs-heading-anchor" href="#OptimalPowerFlowAPI">Optimal Power Flow</a><a id="OptimalPowerFlowAPI-1"></a><a class="docs-heading-anchor-permalink" href="#OptimalPowerFlowAPI" title="Permalink"></a></h1><p>For further information on this topic, please see the <a href="../../manual/acOptimalPowerFlow/#ACOptimalPowerFlowManual">AC Optimal Power Flow</a> or <a href="../../manual/dcOptimalPowerFlow/#DCOptimalPowerFlowManual">DC Optimal Power Flow</a> sections of the Manual. Below, we have provided a list of functions that can be utilized for optimal power flow analysis.</p><p>To load optimal power flow API functionalities into the current scope, one can employ the following command:</p><pre><code class="language-julia hljs">using JuliaGrid, Ipopt</code></pre><hr/><h6 id="AC-Optimal-Power-Flow"><a class="docs-heading-anchor" href="#AC-Optimal-Power-Flow">AC Optimal Power Flow</a><a id="AC-Optimal-Power-Flow-1"></a><a class="docs-heading-anchor-permalink" href="#AC-Optimal-Power-Flow" title="Permalink"></a></h6><ul><li><a href="#JuliaGrid.acOptimalPowerFlow"><code>acOptimalPowerFlow</code></a></li><li><a href="#JuliaGrid.solve!-Tuple{AcOptimalPowerFlow}"><code>solve!</code></a></li><li><a href="#JuliaGrid.setInitialPoint!-Tuple{AcOptimalPowerFlow}"><code>setInitialPoint!</code></a></li><li><a href="#JuliaGrid.powerFlow!-Tuple{AcOptimalPowerFlow}"><code>powerFlow!</code></a></li></ul><h6 id="DC-Optimal-Power-Flow"><a class="docs-heading-anchor" href="#DC-Optimal-Power-Flow">DC Optimal Power Flow</a><a id="DC-Optimal-Power-Flow-1"></a><a class="docs-heading-anchor-permalink" href="#DC-Optimal-Power-Flow" title="Permalink"></a></h6><ul><li><a href="#JuliaGrid.dcOptimalPowerFlow"><code>dcOptimalPowerFlow</code></a></li><li><a href="#JuliaGrid.solve!-Tuple{DcOptimalPowerFlow}"><code>solve!</code></a></li><li><a href="#JuliaGrid.setInitialPoint!-Tuple{DcOptimalPowerFlow}"><code>setInitialPoint!</code></a></li><li><a href="#JuliaGrid.powerFlow!-Tuple{DcOptimalPowerFlow}"><code>powerFlow!</code></a></li></ul><h6 id="Extended-Formulation"><a class="docs-heading-anchor" href="#Extended-Formulation">Extended Formulation</a><a id="Extended-Formulation-1"></a><a class="docs-heading-anchor-permalink" href="#Extended-Formulation" title="Permalink"></a></h6><ul><li><a href="#JuliaGrid.@addVariable"><code>@addVariable</code></a></li><li><a href="#JuliaGrid.@addConstraint"><code>@addConstraint</code></a></li></ul><h6 id="Utility-Functions"><a class="docs-heading-anchor" href="#Utility-Functions">Utility Functions</a><a id="Utility-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Utility-Functions" title="Permalink"></a></h6><ul><li><a href="#JuliaGrid.addDual!"><code>addDual!</code></a></li><li><a href="#JuliaGrid.remove!"><code>remove!</code></a></li></ul><hr/><h2 id="AC-Optimal-Power-Flow-2"><a class="docs-heading-anchor" href="#AC-Optimal-Power-Flow-2">AC Optimal Power Flow</a><a class="docs-heading-anchor-permalink" href="#AC-Optimal-Power-Flow-2" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.acOptimalPowerFlow" href="#JuliaGrid.acOptimalPowerFlow"><code>JuliaGrid.acOptimalPowerFlow</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">acOptimalPowerFlow(system::PowerSystem, optimizer;
    iteration, tolerance, bridge, interval, name,
    magnitude, angle, active, reactive, actwise, reactwise, verbose)</code></pre><p>The function sets up the optimization model for solving the AC optimal power flow problem.</p><p><strong>Arguments</strong></p><p>The function requires the <code>PowerSystem</code> type to establish the framework. Next, the <code>optimizer</code> argument is also required to create and solve the optimization problem. Specifically, JuliaGrid constructs the AC optimal power flow using the JuMP package and provides support for commonly employed solvers. For more detailed information, please consult the <a href="https://jump.dev/JuMP.jl/stable/packages/solvers/">JuMP documentation</a>.</p><p><strong>Keywords</strong></p><p>Users can configure the following parameters:</p><ul><li><code>iteration</code>: Specifies the maximum number of iterations.</li><li><code>tolerance</code>: Specifies the allowed deviation from the optimal solution.</li><li><code>bridge</code>: Manage the bridging mechanism (default: <code>false</code>).</li><li><code>interval</code>: Uses interval form for two-sided constraints (default: <code>true</code>).</li><li><code>name</code>: Manage the creation of string names (default: <code>true</code>).</li><li><code>verbose</code>: Controls the output display, ranging from silent mode (<code>0</code>) to detailed output (<code>3</code>).</li></ul><p>Additionally, users can modify the variable names used for printing and writing by setting the keywords for the variables <code>magnitude</code>, <code>angle</code>, <code>active</code>, and <code>reactive</code>, as well as the helper variables <code>actwise</code> and <code>reactwise</code>. For instance, users can choose <code>magnitude = &quot;V&quot;</code> and <code>angle = &quot;θ&quot;</code> to display equations in a more readable format.</p><p><strong>Updates</strong></p><p>If the AC model has not been created, the function automatically initiates an update within the <code>ac</code> field of the <code>PowerSystem</code> type.</p><p><strong>Returns</strong></p><p>The function returns an instance of the <a href="../publicTypes/#JuliaGrid.AcOptimalPowerFlow"><code>AcOptimalPowerFlow</code></a> type.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = acOptimalPowerFlow(system, Ipopt.Optimizer; iteration = 50, verbose = 1)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/138c54ec71c6a2db014f621ed16023e72db43ac5/src/optimalPowerFlow/acOptimalPowerFlow.jl#L1-L43">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.solve!-Tuple{AcOptimalPowerFlow}" href="#JuliaGrid.solve!-Tuple{AcOptimalPowerFlow}"><code>JuliaGrid.solve!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">solve!(analysis::AcOptimalPowerFlow)</code></pre><p>The function solves the AC optimal power flow model, computing the active and reactive power outputs of the generators, as well as the bus voltage magnitudes and angles.</p><p><strong>Updates</strong></p><p>The calculated active and reactive powers, as well as voltage magnitudes and angles, are stored in the <code>power.generator</code> and <code>voltage</code> fields of the <code>AcOptimalPowerFlow</code> type.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = acOptimalPowerFlow(system, Ipopt.Optimizer)
solve!(analysis)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/138c54ec71c6a2db014f621ed16023e72db43ac5/src/optimalPowerFlow/acOptimalPowerFlow.jl#L248-L266">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.setInitialPoint!-Tuple{AcOptimalPowerFlow}" href="#JuliaGrid.setInitialPoint!-Tuple{AcOptimalPowerFlow}"><code>JuliaGrid.setInitialPoint!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">setInitialPoint!(analysis::AcOptimalPowerFlow)</code></pre><p>The function sets the initial point of the AC optimal power flow to the values from the <code>PowerSystem</code> type.</p><p><strong>Updates</strong></p><p>The function modifies the <code>voltage</code> and <code>generator</code> fields of the <code>AcOptimalPowerFlow</code> type.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = acOptimalPowerFlow(system, Ipopt.Optimizer)
powerFlow!(analysis)

updateBus!(analysis; label = &quot;Bus 14 LV&quot;, reactive = 0.13, magnitude = 1.2, angle = -0.17)

setInitialPoint!(analysis)
powerFlow!(analysis)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/138c54ec71c6a2db014f621ed16023e72db43ac5/src/optimalPowerFlow/acOptimalPowerFlow.jl#L726-L748">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.setInitialPoint!-Tuple{AcOptimalPowerFlow, AC}" href="#JuliaGrid.setInitialPoint!-Tuple{AcOptimalPowerFlow, AC}"><code>JuliaGrid.setInitialPoint!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">setInitialPoint!(target::AcOptimalPowerFlow, source::Analysis)</code></pre><p>The function initializes the AC optimal power flow based on results from the <code>Analysis</code> type, whether from an AC or DC analysis.</p><p>The function assigns the active and reactive power outputs of the generators, along with the bus voltage magnitudes and angles in the <code>target</code> argument, using data from the <code>source</code> argument. This allows users to initialize primal values as needed. Additionally, if <code>source</code> is of type <code>AcOptimalPowerFlow</code>, the function also assigns initial dual values in the <code>target</code> argument based on data from <code>source</code>.</p><p>If <code>source</code> comes from a DC analysis, only the active power outputs of the generators and bus voltage angles are assigned in the <code>target</code> argument, while the reactive power outputs of the generators and bus voltage magnitudes remain unchanged. Additionally, if <code>source</code> is of type <code>DcOptimalPowerFlow</code>, the corresponding dual variable values are also assigned in the <code>target</code> argument.</p><p><strong>Updates</strong></p><p>This function may modify the <code>voltage</code>, <code>generator</code>, and <code>method.dual</code> fields of the <code>AcOptimalPowerFlow</code> type.</p><p><strong>Example</strong></p><p>Use the AC power flow results to initialize the AC optimal power flow:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

source = newtonRaphson(system)
powerFlow!(source)

target = acOptimalPowerFlow(system, Ipopt.Optimizer)

setInitialPoint!(target, source)
powerFlow!(target)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/138c54ec71c6a2db014f621ed16023e72db43ac5/src/optimalPowerFlow/acOptimalPowerFlow.jl#L776-L811">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.powerFlow!-Tuple{AcOptimalPowerFlow}" href="#JuliaGrid.powerFlow!-Tuple{AcOptimalPowerFlow}"><code>JuliaGrid.powerFlow!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">powerFlow!(analysis::AcOptimalPowerFlow; iteration, tolerance, power, current, verbose)</code></pre><p>The function serves as a wrapper for solving AC optimal power flow and includes the functions:</p><ul><li><a href="#JuliaGrid.solve!-Tuple{AcOptimalPowerFlow}"><code>solve!</code></a>,</li><li><a href="../analysis/#JuliaGrid.power!-Tuple{AcPowerFlow}"><code>power!</code></a>,</li><li><a href="../analysis/#JuliaGrid.current!-Tuple{AC}"><code>current!</code></a>.</li></ul><p>It computes the active and reactive power outputs of the generators, as well as the bus voltage magnitudes and angles, with an option to compute the powers and currents related to buses and branches.</p><p><strong>Keywords</strong></p><p>Users can use the following keywords:</p><ul><li><code>iteration</code>: Specifies the maximum number of iterations.</li><li><code>tolerance</code>: Specifies the allowed deviation from the optimal solution.</li><li><code>power</code>: Enables the computation of powers (default: <code>false</code>).</li><li><code>current</code>: Enables the computation of currents (default: <code>false</code>).</li><li><code>verbose</code>: Controls the output display, ranging from the default silent mode (<code>0</code>) to detailed output (<code>3</code>).</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
acModel!(system)

analysis = acOptimalPowerFlow(system, Ipopt.Optimizer)
powerFlow!(analysis; power = true, verbose = 1)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/138c54ec71c6a2db014f621ed16023e72db43ac5/src/optimalPowerFlow/acOptimalPowerFlow.jl#L878-L905">source</a></section></article><hr/><h2 id="DC-Optimal-Power-Flow-2"><a class="docs-heading-anchor" href="#DC-Optimal-Power-Flow-2">DC Optimal Power Flow</a><a class="docs-heading-anchor-permalink" href="#DC-Optimal-Power-Flow-2" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.dcOptimalPowerFlow" href="#JuliaGrid.dcOptimalPowerFlow"><code>JuliaGrid.dcOptimalPowerFlow</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">dcOptimalPowerFlow(system::PowerSystem, optimizer;
    iteration, tolerance, bridge, interval, name, angle, active, actwise, verbose)</code></pre><p>The function sets up the optimization model for solving the DC optimal power flow problem.</p><p><strong>Arguments</strong></p><p>The function requires the <code>PowerSystem</code> type to establish the framework. Next, the <code>optimizer</code> argument is also required to create and solve the optimization problem. Specifically, JuliaGrid constructs the DC optimal power flow using the JuMP package and provides support for commonly employed solvers. For more detailed information, please consult the <a href="https://jump.dev/JuMP.jl/stable/packages/solvers/">JuMP documentation</a>.</p><p><strong>Keywords</strong></p><p>Users can configure the following parameters:</p><ul><li><code>iteration</code>: Specifies the maximum number of iterations.</li><li><code>tolerance</code>: Specifies the allowed deviation from the optimal solution.</li><li><code>bridge</code>: Controls the bridging mechanism (default: <code>false</code>).</li><li><code>interval</code>: Uses interval form for two-sided expression constraints (default: <code>true</code>).</li><li><code>name</code>: Enables or disables the creation of string names (default: <code>true</code>).</li><li><code>verbose</code>: Controls the output display, ranging from the default silent mode (<code>0</code>) to detailed output (<code>3</code>).</li></ul><p>Additionally, users can modify the variable names used for printing and writing by setting the keywords for the voltage variables <code>angle</code> and <code>active</code>, as well as the helper variable <code>actwise</code>. For example, users may set <code>angle = &quot;θ&quot;</code>, <code>active = &quot;P&quot;</code>, and <code>actwise = &quot;H&quot;</code> to display equations in a more readable format.</p><p><strong>Updates</strong></p><p>If the DC model has not been created, the function automatically initiates an update within the <code>dc</code> field of the <code>PowerSystem</code> type.</p><p><strong>Returns</strong></p><p>The function returns an instance of the <a href="../publicTypes/#JuliaGrid.DcOptimalPowerFlow"><code>DcOptimalPowerFlow</code></a> type.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
dcModel!(system)

analysis = dcOptimalPowerFlow(system, Ipopt.Optimizer)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/138c54ec71c6a2db014f621ed16023e72db43ac5/src/optimalPowerFlow/dcOptimalPowerFlow.jl#L1-L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.solve!-Tuple{DcOptimalPowerFlow}" href="#JuliaGrid.solve!-Tuple{DcOptimalPowerFlow}"><code>JuliaGrid.solve!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">solve!(analysis::DcOptimalPowerFlow)</code></pre><p>The function solves the DC optimal power flow model, computing the active power outputs of the generators, as well as the bus voltage angles.</p><p><strong>Updates</strong></p><p>The calculated active powers, as well as voltage angles, are stored in the <code>power.generator</code> and <code>voltage</code> fields of the <code>DcOptimalPowerFlow</code> type.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
dcModel!(system)

analysis = dcOptimalPowerFlow(system, Ipopt.Optimizer)
solve!(analysis)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/138c54ec71c6a2db014f621ed16023e72db43ac5/src/optimalPowerFlow/dcOptimalPowerFlow.jl#L274-L292">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.setInitialPoint!-Tuple{DcOptimalPowerFlow}" href="#JuliaGrid.setInitialPoint!-Tuple{DcOptimalPowerFlow}"><code>JuliaGrid.setInitialPoint!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">setInitialPoint!(analysis::DcOptimalPowerFlow)</code></pre><p>The function sets the initial point of the DC optimal power flow to the values from the <code>PowerSystem</code> type.</p><p><strong>Updates</strong></p><p>The function modifies the <code>voltage</code> and <code>generator</code> fields of the <code>DcOptimalPowerFlow</code> type.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
dcModel!(system)

analysis = dcOptimalPowerFlow(system, Ipopt.Optimizer)
powerFlow!(analysis)

updateBus!(analysis; label = &quot;Bus 14 LV&quot;, active = 0.1, angle = -0.17)

setInitialPoint!(analysis)
powerFlow!(analysis)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/138c54ec71c6a2db014f621ed16023e72db43ac5/src/optimalPowerFlow/dcOptimalPowerFlow.jl#L352-L374">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.setInitialPoint!-Tuple{DcOptimalPowerFlow, DC}" href="#JuliaGrid.setInitialPoint!-Tuple{DcOptimalPowerFlow, DC}"><code>JuliaGrid.setInitialPoint!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">setInitialPoint!(target::DcOptimalPowerFlow, source::Analysis)</code></pre><p>The function initializes the DC optimal power flow based on results from the <code>Analysis</code> type, whether from an AC or DC analysis.</p><p>The function assigns the active power outputs of the generators, along with the bus voltage angles in the <code>target</code> argument, using data from the <code>source</code> argument. This allows users to initialize primal values as needed. Additionally, if source is of type <code>AcOptimalPowerFlow</code> or <code>DcOptimalPowerFlow</code>, the function also assigns initial dual values in the <code>target</code> argument based on data from <code>source</code>.</p><p><strong>Updates</strong></p><p>This function may modify the <code>voltage</code>, <code>generator</code>, and <code>method.dual</code> fields of the <code>DcOptimalPowerFlow</code> type.</p><p><strong>Example</strong></p><p>Use the DC power flow results to initialize the DC optimal power flow:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
dcModel!(system)

source = dcPowerFlow(system)
solve!(source)

target = dcOptimalPowerFlow(system, Ipopt.Optimizer)

setInitialPoint!(target, source)
solve!(target)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/138c54ec71c6a2db014f621ed16023e72db43ac5/src/optimalPowerFlow/dcOptimalPowerFlow.jl#L393-L422">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.powerFlow!-Tuple{DcOptimalPowerFlow}" href="#JuliaGrid.powerFlow!-Tuple{DcOptimalPowerFlow}"><code>JuliaGrid.powerFlow!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">powerFlow!(analysis::DcOptimalPowerFlow; iteration, tolerance, power, verbose)</code></pre><p>The function serves as a wrapper for solving DC optimal power flow and includes the functions:</p><ul><li><a href="#JuliaGrid.solve!-Tuple{DcOptimalPowerFlow}"><code>solve!</code></a>,</li><li><a href="../analysis/#JuliaGrid.power!-Tuple{DcPowerFlow}"><code>power!</code></a>.</li></ul><p>It computes the active power outputs of the generators, as well as the bus voltage angles, with an option to compute the powers related to buses and branches.</p><p><strong>Keywords</strong></p><p>Users can use the following keywords:</p><ul><li><code>iteration</code>: Specifies the maximum number of iterations.</li><li><code>tolerance</code>: Specifies the allowed deviation from the optimal solution.</li><li><code>power</code>: Enables the computation of powers (default: <code>false</code>).</li><li><code>verbose</code>: Controls the output display, ranging from the default silent mode (<code>0</code>) to detailed output (<code>3</code>).</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)
dcModel!(system)

analysis = dcOptimalPowerFlow(system, Ipopt.Optimizer)
powerFlow!(analysis; power = true, verbose = 1)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/138c54ec71c6a2db014f621ed16023e72db43ac5/src/optimalPowerFlow/dcOptimalPowerFlow.jl#L484-L509">source</a></section></article><hr/><h2 id="Extended-Formulation-2"><a class="docs-heading-anchor" href="#Extended-Formulation-2">Extended Formulation</a><a class="docs-heading-anchor-permalink" href="#Extended-Formulation-2" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.@addVariable" href="#JuliaGrid.@addVariable"><code>JuliaGrid.@addVariable</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@addVariable(analysis::OptimalPowerFlow, expr, primal, lower, upper, args..., kwargs...)</code></pre><p>This macro wraps the JuMP <a href="https://jump.dev/JuMP.jl/stable/api/JuMP/#@variable">@variable</a> macro, adding an optimization variable defined by <code>expr</code> to the model. In addition to creating the JuMP variable, it also registers the variable within the JuliaGrid framework and optionally sets initial values for both primal and dual variables.</p><p>The positional arguments <code>args</code> and keyword arguments <code>kwargs</code> are consistent with those accepted by the <a href="https://jump.dev/JuMP.jl/stable/api/JuMP/#@variable">@variable</a> macro in JuMP.</p><p>Additionally, the following keyword arguments can be used:</p><ul><li><code>primal</code>: Sets the initial primal value.</li><li><code>lower</code>: If a lower bound is defined, sets the initial dual value.</li><li><code>upper</code>: If an upper bound is defined, sets the initial dual value.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)

analysis = dcOptimalPowerFlow(system, Ipopt.Optimizer)

@addVariable(analysis, 0.0 &lt;= x &lt;= 0.2, primal = 0.1, lower = 10.0, upper = 0.0)
@addVariable(analysis, y[i = 1:2] &lt;= 0.2, primal = [0.1, 0.2], upper = [0.0; -2.5])</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/138c54ec71c6a2db014f621ed16023e72db43ac5/src/optimalPowerFlow/extended.jl#L1-L26">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.@addConstraint" href="#JuliaGrid.@addConstraint"><code>JuliaGrid.@addConstraint</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">@addConstraint(analysis::OptimalPowerFlow, expr, dual, args..., kwargs...)</code></pre><p>This macro wraps the JuMP <a href="https://jump.dev/JuMP.jl/stable/api/JuMP/#@constraint">@constraint</a> macro, adding an constraint defined by <code>expr</code> to the model. In addition to creating the JuMP constraint, it also registers the constraint within the JuliaGrid framework and optionally sets initial dual value.</p><p>The positional arguments <code>args</code> and keyword arguments <code>kwargs</code> are consistent with those accepted by the <a href="https://jump.dev/JuMP.jl/stable/api/JuMP/#@constraint">@constraint</a> macro in JuMP.</p><p>Additionally, the keyword <code>dual</code> can be used to set the initial dual value.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)

analysis = dcOptimalPowerFlow(system, Ipopt.Optimizer)

@addVariable(analysis, 0.0 &lt;= x[i = 1:2] &lt;= 0.2)
@addConstraint(analysis, x[1] + 2 * x[2] &lt;= 1.2, dual = 0.1)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/138c54ec71c6a2db014f621ed16023e72db43ac5/src/optimalPowerFlow/extended.jl#L85-L107">source</a></section></article><h2 id="Utility-Functions-2"><a class="docs-heading-anchor" href="#Utility-Functions-2">Utility Functions</a><a class="docs-heading-anchor-permalink" href="#Utility-Functions-2" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.addDual!" href="#JuliaGrid.addDual!"><code>JuliaGrid.addDual!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">addDual!(analysis::OptimalPowerFlow, field::Symbol, subfield::Symbol;
    label, index, subindex, dual, lower, upper)</code></pre><p>Assigns an initial dual value to a specific constraint in the optimal power flow model.</p><p>For DC optimal power flow, only <code>field</code> is required to identify the constraint. For AC optimal power flow, both <code>field</code> and <code>subfield</code> must be provided to target the specific constraint type.</p><p><strong>Arguments</strong></p><ul><li><code>field</code>: Specifies the primary constraint category.</li><li><code>subfield</code>: Specifies the constraint subtype within the selected <code>field</code>.</li></ul><p>Initial dual values are assigned according to the selected constraint:</p><ul><li><code>:slack</code>: Slack angle constraint.</li><li><code>:capability</code>: Generator capability constraints:<ul><li><code>:active</code>: Active power.</li><li><code>:reactive</code>: Reactive power.</li><li><code>:lower</code>: PQ capability curve.</li><li><code>:upper</code>: PQ capability curve.</li></ul></li><li><code>:balance</code>: Power balance constraints:<ul><li><code>:active</code>: Active power balance.</li><li><code>:reactive</code>: Reactive power balance.</li></ul></li><li><code>:voltage</code>: Voltage constraints:<ul><li><code>:magnitude</code>: Voltage magnitude.</li><li><code>:angle</code>: Angle difference.</li></ul></li><li><code>:flow</code>: Branch power flow constraints:<ul><li><code>:from</code>: From-bus end.</li><li><code>:to</code>: To-bus end.</li></ul></li><li><code>:piecewise</code>: Piecewise linear cost constraints:<ul><li><code>:active</code>: Active power.</li><li><code>:reactive</code>: Reactive power.</li></ul></li><li><code>:variable</code>: Constraint on external user-defined variable.</li><li><code>:constraint</code>: External user-defined constraint.</li></ul><p><strong>Keywords</strong></p><p>The following keyword arguments can be used:</p><ul><li><code>label</code>: Identifies the constraint by the label of a bus, branch, or generator.</li><li><code>index</code>: Identifies the constraint by numerical index.</li><li><code>subindex</code>: Specify a subconstraint index for <code>:piecewise</code> constraints only.</li><li><code>dual</code>: Sets the dual value for equality or interval constraints.</li><li><code>lower</code>: Sets the dual value associated with the lower bound.</li><li><code>upper</code>: Sets the dual value associated with the upper bound.</li></ul><p><strong>Examples</strong></p><p>AC optimal power flow:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)

analysis = acOptimalPowerFlow(system, Ipopt.Optimizer)

addDual!(analysis, :balance, :active; index = 2, dual = 258.23)
addDual!(analysis, :voltage, :magnitude; index = 2, lower = 0.0, upper = 587.23)</code></pre><p>DC optimal power flow:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)

analysis = dcOptimalPowerFlow(system, Ipopt.Optimizer)

addDual!(analysis, :balance; index = 2, dual = 258.23)
addDual!(analysis, :capability; index = 2, lower = 0.0, upper = 587.23)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/138c54ec71c6a2db014f621ed16023e72db43ac5/src/optimalPowerFlow/utility.jl#L1-L65">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JuliaGrid.remove!" href="#JuliaGrid.remove!"><code>JuliaGrid.remove!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">remove!(analysis::OptimalPowerFlow, field::Symbol, subfield::Symbol; label, index)</code></pre><p>Removes a specific constraint from the optimal power flow model.</p><p>For DC optimal power flow, only <code>field</code> is required to identify the constraint. For AC optimal power flow, both <code>field</code> and <code>subfield</code> must be provided to target the specific constraint type.</p><p><strong>Arguments</strong></p><ul><li><code>field</code>: Specifies the primary constraint category.</li><li><code>subfield</code>: Specifies the constraint subtype within the selected <code>field</code>.</li></ul><p>The constraint to be removed can correspond to one of the following:</p><ul><li><code>:slack</code>: Slack angle constraint.</li><li><code>:capability</code>: Generator capability constraints:<ul><li><code>:active</code>: Active power.</li><li><code>:reactive</code>: Reactive power.</li><li><code>:lower</code>: PQ capability curve.</li><li><code>:upper</code>: PQ capability curve.</li></ul></li><li><code>:balance</code>: Power balance constraints:<ul><li><code>:active</code>: Active power balance.</li><li><code>:reactive</code>: Reactive power balance.</li></ul></li><li><code>:voltage</code>: Voltage constraints:<ul><li><code>:magnitude</code>: Voltage magnitude.</li><li><code>:angle</code>: Angle difference.</li></ul></li><li><code>:flow</code>: Branch power flow constraints:<ul><li><code>:from</code>: From-bus end.</li><li><code>:to</code>: To-bus end.</li></ul></li><li><code>:piecewise</code>: Piecewise linear cost constraints:<ul><li><code>:active</code>: Active power.</li><li><code>:reactive</code>: Reactive power.</li></ul></li><li><code>:variable</code>: Constraint on external user-defined variable.</li><li><code>:constraint</code>: External user-defined constraint.</li></ul><p><strong>Keywords</strong></p><p>The following keyword arguments can be used:</p><ul><li><code>label</code>: Identifies the constraint by the label of a bus, branch, or generator.</li><li><code>index</code>: Identifies the constraint by numerical index.</li></ul><p><strong>Examples</strong></p><p>AC optimal power flow:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)

analysis = acOptimalPowerFlow(system, Ipopt.Optimizer)

remove!(analysis, :balance, :active; index = 2)
remove!(analysis, :voltage, :magnitude; index = 2)</code></pre><p>DC optimal power flow:</p><pre><code class="language-julia hljs">system = powerSystem(&quot;case14.h5&quot;)

analysis = dcOptimalPowerFlow(system, Ipopt.Optimizer)

remove!(analysis, :balance; index = 2)
remove!(analysis, :capability; index = 2)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mcosovic/JuliaGrid.jl/blob/138c54ec71c6a2db014f621ed16023e72db43ac5/src/optimalPowerFlow/utility.jl#L232-L291">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../powerFlow/">« Power Flow</a><a class="docs-footer-nextpage" href="../measurementModel/">Measurement Model »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.10.2 on <span class="colophon-date" title="Monday 28 July 2025 13:02">Monday 28 July 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
